---
title: ã€webpackã€‘æ„å»ºæ ‡å‡†åŒ–reactåº”ç”¨
date: 2021-08-18 22:09:02
permalink: /pages/c3ea73/
categories:
  - æ–‡ç« 
tags:
  - webpack
  - react
---

:::tip
æœ¬ç¯‡æ–‡ç« å°šå¤„åœ¨ç¼–å†™çŠ¶æ€ä¸­...
:::

å…ˆç”©ä¸ªé¡¹ç›®åœ°å€ï¼Œæ–‡ç« æŠ½ç©ºå†™ä¸€ç¯‡å‡ºæ¥ï¼Œæœ€è¿‘æœ‰ç‚¹å°å¿™æš‚æ—¶æ²¡æ¥å¾—åŠå¼„ğŸ˜…~

<https://github.com/JS-banana/webpack-react-ts>

<!-- more -->

æœ‰å…´è¶£çš„å¯ä»¥å…ˆçœ‹çœ‹ä»£ç åŠå·¥ç¨‹åŒ–é…ç½®ï¼Œä¸»è¦åŠŸèƒ½é…ç½®ã€è§„èŒƒåŒ–ç®¡ç†å’Œä½¿ç”¨ç»†èŠ‚åŸºæœ¬éƒ½æ²¡å•¥é—®é¢˜äº†ã€‚

åé¢è‹¥å‘ç°æ„å»ºåŠé…ç½®é—®é¢˜ã€ä»¥åŠå¯ä¼˜åŒ–çš„ç»†èŠ‚éƒ¨åˆ†ã€åŒ…æ‹¬åŠŸèƒ½çš„è¿›ä¸€æ­¥è¿­ä»£ä¹Ÿä¼šä½¿é¡¹ç›®ä¸æ–­æ›´æ–°å®Œå–„çš„~

åæœŸæ‰“ç®—å¼€å‘å¹¶å¼€æºä¸€ä¸ªreact-adminæ ‡å‡†åå°ç®¡ç†ç³»ç»Ÿï¼Œç”¨äºå®è·µå¹¶å·©å›ºä¸€äº›å‰ç«¯æŠ€æœ¯æ¡†æ¶ä¸ç»„ä»¶å¼€å‘ç­‰ã€‚

## èƒŒæ™¯

ä¸ºä»€ä¹ˆè¦è‡ªå·±æ­å»ºä¸€ä¸ªwebpack-react-tsçš„æ ‡å‡†åŒ–é¡¹ç›®ï¼Ÿ

### åŸå› ä¹‹ä¸€

åœ¨å¾ˆæ—©ä¹‹å‰çš„å…¬å¸æ—¶ï¼Œé¡¹ç›®å®é™…å¼€å‘è¿‡ç¨‹ä¸­äº§ç”Ÿè¿‡è¿™ç§éœ€æ±‚

- æ¯æ¬¡å¼€å‘æ–°é¡¹ç›®æ—¶å¸Œæœ›æœ‰ä¸ªå®Œæ•´åŠŸèƒ½ã€é…ç½®å¥½ç”¨ã€æ ‡å‡†åŒ–è§„èŒƒçš„æ¨¡æ¿å¯ä»¥å¿«é€Ÿä½¿ç”¨

å®Œæ•´åŠŸèƒ½ï¼šå¦‚æœæ˜¯ä½¿ç”¨create-react-appåˆ›å»ºé¡¹ç›®ï¼Œå±äºæœ€ç®€æ˜“ç‰ˆçš„ä¸€ä¸ªå®ç°äº†ï¼Œå„ç§loaderã€pluginã€babelç­‰webpacké…ç½®ç¼ºå¤±ï¼Œä½œä¸ºç°ä»£å‰ç«¯å¼€å‘ä¸å¯æˆ–ç¼ºçš„æ„å»ºå·¥å…·ï¼Œå…¶å¯¹é¡¹ç›®çš„å¤§éƒ¨åˆ†åŠŸèƒ½æ”¯æŒæ˜¯å¿…é¡»çš„ã€‚

é…ç½®å¥½ç”¨ï¼šwebpackå¯¹å„ç§æ’ä»¶çš„é…ç½®ä¸é›†æˆï¼ŒåŸºæœ¬è·¯ç”±æ¨¡å—ã€é¡µé¢æ¨¡å—ã€ç»„ä»¶æ¨¡å—ã€storeçŠ¶æ€ç®¡ç†æ¨¡å—ç­‰åŸºæœ¬å¸¸ç”¨åŠŸèƒ½çš„ç®€è¦ç¤ºä¾‹åŠdemoï¼Œè¦æœ‰ä¸€å®šçš„è¦†ç›–ç‡ã€‚

æ ‡å‡†è§„èŒƒï¼šè¿™ä¸ªå¯èƒ½æ˜¯å·¥ç¨‹åŒ–æ„å»ºæœ€é‡è¦çš„éƒ¨åˆ†ä¹‹ä¸€äº†ï¼Œeslintã€prettierã€stylelintã€commitlintç­‰lintè§„èŒƒå’Œæ ¼å¼åŒ–ä»¥åŠtestæµ‹è¯•ï¼Œè¿˜æœ‰ç›®å½•ç»“æ„è§„èŒƒã€å‘½åè§„èŒƒç­‰ã€‚å¯¹äºè§„èŒƒåŒ–çš„æ„ä¹‰å…¶é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œå¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€å¼€å‘æ•ˆç‡ã€bugç‡ç­‰å¯è§ä¸€æ–‘

### åŸå› ä¹‹äºŒ

å½“ç„¶ç½‘ä¸Šè‚¯å®šæœ‰å¾ˆå¤šä¼˜ç§€çš„è½®å­ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä»–ä»¬æœ‰çš„åŠŸèƒ½æ›´å…¨ã€æœ‰çš„ç»†èŠ‚æ›´å¥½ï¼Œæœ‰çš„ç¤ºä¾‹æ›´å®Œæ•´ã€‚è¿™éƒ½æ˜¯æˆ‘ä»¬å­¦ä¹ çš„æ¦œæ ·ï¼Œå¯¹äºå…¶æºç é˜…è¯»å’Œå­¦ä¹ ä¹Ÿæ˜¯æä¸ºæœ‰ç›Šçš„ï¼Œä¸è¿‡ï¼Œå§‹ç»ˆé¿å…ä¸äº†ä¸€ç‚¹ï¼Œçœ‹çš„å†å¤šéƒ½ä¸å¦‚è‡ªå·±å®è·µæ¥çš„æœ‰æ•ˆæœï¼Œæ‰€ä»¥ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è€ƒè™‘çš„åŸå› ä¹‹ä¸€ï¼Œä¸ºäº†è‡ªå·±å®è·µå’Œæ“ä½œæ¥æå‡æŠ€æœ¯ç†Ÿç»ƒåº¦ã€‚

### åŸå› ä¸‰

è¿™ä¹Ÿæ˜¯æºäºåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„éœ€æ±‚ï¼Œå³ï¼Œä¸åŒæŠ€æœ¯å¹³å°åŠåœºæ™¯é€‚åº”äºä¸åŒçš„æŠ€æœ¯æ¡†æ¶å’Œè·¯çº¿ã€‚

ä¸¾ä¸ªæ —å­ï¼Œ

1. ç®¡ç†åå°ç³»ç»Ÿï¼šè¿™ä¸ªå¤šé€‚ç”¨äºPCç«¯ï¼Œä½¿ç”¨å•é¡µé¢åº”ç”¨å¼€å‘ï¼Œä¸»æµæŠ€æœ¯æ¡†æ¶ Reactã€Vueã€Angularç­‰

2. ç½‘ç«™ç±»ï¼šè¿™ç±»é¡¹ç›®ä¸€èˆ¬è¿½æ±‚ç¾è§‚å’ŒSEOæœç´¢çš„é‡è¦æ€§ï¼Œè€Œä¸ä¼šåƒç®¡ç†åå°ç³»ç»Ÿä¸€æ ·æœ‰å¾ˆå¤æ‚çš„é€»è¾‘ï¼Œæ›´å¤šçš„æ˜¯ä¸€äº›åŠ¨æ•ˆåŠUIäº¤äº’ï¼Œå› ä¸ºSPAçš„é—®é¢˜ï¼Œç¤¾ä¼šæœ‰æˆç†Ÿçš„æœåŠ¡ç«¯æ¸²æŸ“SSRæ–¹æ¡ˆï¼šnextã€nuxtï¼Œåˆ†åˆ«å¯¹åº”reactå’ŒvueæŠ€æœ¯æ ˆï¼Œå¯¹äºä¹ æƒ¯äº†å•é¡µé¢å¼€å‘çš„åŒå­¦è¿˜æ˜¯å¾ˆå‹å¥½çš„ã€‚

3. ç§»åŠ¨ç«¯ï¼šè½»é‡åŒ–ã€è½»é‡åŒ–ã€è½»é‡åŒ–ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚æ‰‹æœºç«¯æµé‡ç¬¬ä¸€ï¼Œé¡¹ç›®è¶Šå°è¶Šç»é‡æ€§èƒ½è¶Šå¥½åŠ è½½ä¹Ÿå°±è¶Šå¿«ï¼Œå¯¹äºç”¨æˆ·ä½“éªŒä¹Ÿå°±è¶Šå¥½ã€‚æ¯”è¾ƒæ‰‹æœºç«¯ä¸€èˆ¬å¯¹åº”çš„éƒ½æ˜¯Cç«¯ç”¨æˆ·ï¼Œä¸åƒç®¡ç†åå°ä¸»è¦æ˜¯ç»™Bç«¯åŠå…¬å¸å†…éƒ¨ä½¿ç”¨ã€‚ç”¨æˆ·ä½“éªŒè¦æ±‚æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚å¦‚ï¼Œç§»åŠ¨ç«¯ç‰ˆreactâ€”â€”preactï¼Œsvelteã€solidjsç­‰æ— è™šæ‹ŸDOMæ¡†æ¶ï¼Œå‡å°‘å¤§é‡è¿è¡Œæ—¶ä»£ç ã€‚

æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºæ¯ä¸ªæŠ€æœ¯éƒ½æœ‰å…¶å¯¹åº”çš„ä¼˜åŠ¿å’Œé€‚åˆçš„åœºæ™¯ï¼Œå•ä¸€æ¡†æ¶å¹¶ä¸æ˜¯å®Œå…¨é€‚åˆæ¢­å“ˆåˆ°åº•çš„ã€‚

è¿™ä¹Ÿæ˜¯æˆ‘å¼€å‘node-cliè‡ªåŠ¨åŒ–åˆå§‹åŒ–é¡¹ç›®çš„ä¸€ä¸ªæ¡†æ¶æ¨¡æ¿ä¹‹ä¸€ã€‚

æ¥ä¸‹æ¥å¯¹å„ä¸ªä¸åŒæŠ€æœ¯æ–¹æ¡ˆåŠæœ€ä½³å®è·µä¹Ÿä¼šè€ƒè™‘æ„å»ºå…·æœ‰å®æˆ˜æ„ä¹‰çš„æ¨¡æ¿ä»¥ä¾›ä½¿ç”¨

ä¸»è¦æ–¹å‘å¤§æ¦‚åˆ†ä¸ºï¼šwebpack+react/vue+typescriptç­‰webpackæ–¹å‘ã€vite+react/vue+typescriptç­‰viteæ–¹å‘ã€nuxt/next/egg/koaç­‰æœåŠ¡ç«¯æ¸²æŸ“SSRæ–¹å‘ã€svelte/solidjsç­‰æ— è™šæ‹ŸDOMçš„è½»é‡çº§æ¡†æ¶æ–¹å‘ã€rollup/parcelç­‰æ„å»ºå·¥å…·æ–¹å‘ã€esbuild/swcç­‰æ–°å‹ç¼–è¯‘å™¨ä¸æ„å»ºå·¥å…·çš„ç»“åˆä½¿ç”¨ç­‰ã€ä»¥åŠå°ç¨‹åº/è·¨å¹³å°ç­‰ã€‚

æœ‰ç‚¹é£˜å•Šï¼Œæƒ³æ³•è¿˜æŒºå¤šçš„ğŸ¤“~

## å¼€æ

### ç›®æ ‡

- æŠ€æœ¯æ ˆï¼šWebpack5.x + React17.x + Antd4.x + TypeScript4.x + Less
- å·¥ç¨‹è§„èŒƒ/æ ¼å¼åŒ–ï¼šEslint + Stylelint + Prettier + Commitlint
- ES6ã€JSXï¼Œbabelæ”¯æŒ
- æ”¯æŒHMRçƒ­æ›´æ–°
- æ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹
- æ”¯æŒAntdæŒ‰éœ€åŠ è½½ã€è‡ªå®šä¹‰ä¸»é¢˜ã€css module
- æ”¯æŒjsã€csså‹ç¼©ã€chunkæ‹†åˆ†ã€Gzip
- æ”¯æŒGitHub Action + gh-page

### ä¾èµ–

dependencies

```json
"dependencies": {
  "antd": "^4.16.10",
  "axios": "^0.21.1",
  "clsx": "^1.1.1", // æ¡ä»¶å¤„ç† React className ç±»å
  "core-js": "3", // ç°ä»£JSè¯­æ³•polyfillsåº“ï¼Œç”¨äºå…¼å®¹æµè§ˆå™¨åŠES6ã€ES7è¯­æ³•
  "dayjs": "^1.10.6", // æ—¥æœŸå¤„ç†åº“ï¼Œæ¯”momentå°å¾ˆå¤šï¼Œåªæœ‰å‡ kb
  "history": "^5.0.1", // H5 historyåº“
  "lodash": "^4.17.21", // éå¸¸å…¨é¢çš„æ–¹æ³•åº“
  "react": "^17.0.2",
  "react-dom": "^17.0.2",
  "react-helmet-async": "^1.0.9", // åœ¨reactä¸­ä¼˜é›…çš„æ·»åŠ  HTML header å„ç§å±æ€§
  "react-router-dom": "^5.2.0"
}
```

devDependencies

```json
"devDependencies": {
  "@babel/cli": "^7.14.8",
  "@babel/core": "^7.15.0",
  "@babel/plugin-proposal-class-properties": "^7.14.5",
  "@babel/plugin-syntax-dynamic-import": "^7.8.3",
  "@babel/plugin-transform-modules-commonjs": "^7.15.0",
  "@babel/plugin-transform-react-constant-elements": "^7.14.5",
  "@babel/plugin-transform-react-inline-elements": "^7.14.5",
  "@babel/plugin-transform-runtime": "^7.15.0",
  "@babel/preset-env": "^7.15.0",
  "@babel/preset-react": "^7.14.5",
  "@babel/preset-typescript": "^7.15.0",
  "@commitlint/cli": "^13.1.0",
  "@commitlint/config-conventional": "^13.1.0",
  "@pmmmwh/react-refresh-webpack-plugin": "^0.4.3",
  "@types/enzyme": "^3.10.9",
  "@types/enzyme-adapter-react-16": "^1.0.6",
  "@types/enzyme-to-json": "^1.5.4",
  "@types/react-dom": "^17.0.9",
  "@types/react-helmet": "^6.1.2",
  "@types/react-router-dom": "^5.1.8",
  "@types/webpack-env": "^1.16.2",
  "@typescript-eslint/eslint-plugin": "^4.29.0",
  "@typescript-eslint/parser": "^4.29.0",
  "autoprefixer": "^10.3.1",
  "babel-loader": "^8.2.2",
  "babel-plugin-dynamic-import-node": "^2.3.3",
  "babel-plugin-import": "^1.13.3",
  "babel-plugin-lodash": "^3.3.4",
  "babel-plugin-transform-react-remove-prop-types": "^0.4.24",
  "clean-webpack-plugin": "^4.0.0-alpha.0",
  "compression-webpack-plugin": "^8.0.1",
  "css-loader": "^6.2.0",
  "enzyme": "^3.11.0",
  "enzyme-adapter-react-16": "^1.15.6",
  "enzyme-to-json": "^3.6.2",
  "eslint": "^7.32.0",
  "eslint-config-airbnb-typescript": "^12.3.1",
  "eslint-config-prettier": "^8.3.0",
  "eslint-import-resolver-typescript": "^2.4.0",
  "eslint-import-resolver-webpack": "^0.13.1",
  "eslint-plugin-import": "^2.23.4",
  "eslint-plugin-jsx-a11y": "^6.4.1",
  "eslint-plugin-prettier": "^3.4.0",
  "eslint-plugin-react": "^7.24.0",
  "eslint-plugin-react-hooks": "^4.2.0",
  "eslint-plugin-redux-saga": "^1.2.1",
  "file-loader": "^6.2.0",
  "html-loader": "^2.1.2",
  "html-webpack-plugin": "^5.3.2",
  "husky": "^7.0.1",
  "less": "^4.1.1",
  "less-loader": "^10.0.1",
  "lint-staged": "^11.1.2",
  "mini-css-extract-plugin": "^2.2.0",
  "postcss": "^8.3.6",
  "postcss-loader": "^6.1.1",
  "postcss-nested": "^5.0.6",
  "prettier": "^2.3.2",
  "pretty-quick": "^3.1.1",
  "react-refresh": "^0.10.0",
  "rimraf": "^3.0.2",
  "serve": "^12.0.0",
  "style-loader": "^3.2.1",
  "stylelint": "^13.13.1",
  "stylelint-config-recess-order": "^2.4.0",
  "stylelint-config-standard": "^22.0.0",
  "svg-url-loader": "^7.1.1",
  "terser-webpack-plugin": "^5.1.4",
  "typescript": "^4.3.5",
  "url-loader": "^4.1.1",
  "webpack": "^5.49.0",
  "webpack-bundle-analyzer": "^4.4.2",
  "webpack-cli": "^4.7.2",
  "webpack-dev-middleware": "^5.0.0",
  "webpack-dev-server": "^3.11.2",
  "webpack-hot-middleware": "^2.25.0",
  "webpack-pwa-manifest": "^4.3.0",
  "yargs": "^17.1.0"
}
```
