(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{553:function(s,t,n){"use strict";n.r(t);var a=n(43),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),n("p",[s._v("最近不是在弄博客嘛，之前活动的时候买的阿里云服务器过期了，现在也没优惠了，淦~，搬砖党买不起啊~，现在就想搞个服务器把我博客弄上去跑起来~")]),s._v(" "),n("p",[s._v("我主要就是玩下静态博客和"),n("strong",[s._v("nodejs")]),s._v("啥的，对服务端没啥需求，"),n("strong",[s._v("docker")]),s._v("和"),n("strong",[s._v("mysql")]),s._v("我也不搞，所以就算搞了服务器也是浪费呀，没必要没必要~")]),s._v(" "),n("p",[s._v("我白嫖党只是单纯的想要个白嫖的机会😎")]),s._v(" "),n("p",[s._v("简单说明下我的需求：")]),s._v(" "),n("ol",[n("li",[s._v("有个可以部署博客的服务器（当然最好是免费的~，这个很重要😆~）")]),s._v(" "),n("li",[s._v("可以和"),n("strong",[s._v("GitHub")]),s._v("绑定实现自动化部署（我代码都是放在"),n("strong",[s._v("GitHub")]),s._v("的，我提交代码的时候希望可以实现博客自动更新）")]),s._v(" "),n("li",[s._v("要稳定，不能三天两头打不开页面了~那我岂不是很尴尬")]),s._v(" "),n("li",[s._v("访问速度要跟上，最好有"),n("strong",[s._v("CDN")]),s._v("加速服务，不能等了半天页面还在转圈圈~")]),s._v(" "),n("li",[s._v("支持自定义域名，最好再给个免费"),n("strong",[s._v("SSL")]),s._v("证书，咳咳~")])]),s._v(" "),n("p",[s._v("这么简单的要求应该不过分吧~")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/emoji/2.jpg",alt:"hello"}})]),s._v(" "),n("p",[s._v("其实类似"),n("a",{attrs:{href:"https://help.coding.net/docs/pages/practice/hexo.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("hexo"),n("OutboundLink")],1),s._v("等开源博客框架有些已经集成了自动部署至"),n("strong",[s._v("GitHub")]),s._v("与"),n("strong",[s._v("Coding")]),s._v("的功能。")]),s._v(" "),n("p",[n("strong",[s._v("GitHub")]),s._v("我们自不必多少，懂得都懂😐，开源代码首选，很多框架和库基本都对其做了相关部署支持，其提供的"),n("code",[s._v("gh-pages")]),s._v("服务也非常简单方便（"),n("a",{attrs:{href:"https://docs.github.com/cn/pages/getting-started-with-github-pages",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub Pages"),n("OutboundLink")],1),s._v("），可供我们快速部署一个网站，而且终生免费~，我直呼GitHub yyds~")]),s._v(" "),n("p",[s._v("对于静态网站服务，"),n("strong",[s._v("Gitee")]),s._v("等也都有提供（"),n("a",{attrs:{href:"https://gitee.com/help/articles/4136",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee Pages"),n("OutboundLink")],1),s._v("），有兴趣的可以自行探索，这里我们主要围绕"),n("strong",[s._v("Coding")]),s._v("的使用做一些介绍")]),s._v(" "),n("h3",{attrs:{id:"什么是coding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是coding"}},[s._v("#")]),s._v(" 什么是Coding")]),s._v(" "),n("p",[n("strong",[s._v("Coding")]),s._v("系腾讯旗下全资子公司, 旗下一站式软件研发管理平台—CODING（"),n("a",{attrs:{href:"https://coding.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://coding.net/"),n("OutboundLink")],1),s._v(" ）是一站式软件研发管理协作平台，提供 "),n("code",[s._v("Git")]),s._v("/"),n("code",[s._v("SVN")]),s._v(" 代码托管、项目协同、测试管理、制品库、"),n("code",[s._v("CI")]),s._v("/"),n("code",[s._v("CD")]),s._v(" 等一系列在线工具，帮助研发团队快速落地敏捷开发与 "),n("code",[s._v("DevOps")]),s._v(" 开发方式，提升研发管理效率，实现研发效能升级。")]),s._v(" "),n("h3",{attrs:{id:"为什么要用coding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么要用coding"}},[s._v("#")]),s._v(" 为什么要用Coding")]),s._v(" "),n("p",[s._v("对于"),n("strong",[s._v("Coding")]),s._v("的作用，就我自身使用场景来说，抛开其协作平台能力不谈，其实就类似"),n("strong",[s._v("Gitee")]),s._v("一样，属于国内部署，速度提升非常明显，而且还可以被百度收录。由于众所周知的原因，国内访问"),n("strong",[s._v("GitHub")]),s._v("速度感人，我也试过一开始直接使用"),n("strong",[s._v("GitHub")]),s._v("的"),n("code",[s._v("gh-pages")]),s._v("，但是受网络环境影响很大、波动明显，效率很低，如果只是为了开发的demo展示倒也无妨，但毕竟是作为博客使用，还是求稳定，因此最终选择了"),n("strong",[s._v("Coding")]),s._v("作为仓库镜像，当然这里换成"),n("strong",[s._v("Gitee")]),s._v("也是一样的。")]),s._v(" "),n("p",[s._v("话不多说，开干~")]),s._v(" "),n("h2",{attrs:{id:"开整"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开整"}},[s._v("#")]),s._v(" 开整")]),s._v(" "),n("p",[s._v("这里就以我的博客举例说明："),n("a",{attrs:{href:"https://ssscode.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://ssscode.com/"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"生成-github-token-与-coding-token"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成-github-token-与-coding-token"}},[s._v("#")]),s._v(" 生成 GitHub token 与 Coding token")]),s._v(" "),n("p",[s._v("这一步主要是为了给"),n("strong",[s._v("GitHub Action")]),s._v("脚本提供"),n("code",[s._v("token")]),s._v("使用权限")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github token"),n("OutboundLink")],1),s._v("、"),n("a",{attrs:{href:"https://help.coding.net/docs/member/tokens.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Coding token"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[s._v("GitHub token：执行"),n("code",[s._v("gh-pages")]),s._v("分支推送时需要对应"),n("strong",[s._v("GitHub")]),s._v("的"),n("code",[s._v("repo")]),s._v("权限")]),s._v(" "),n("li",[s._v("Coding token：执行"),n("code",[s._v("push")]),s._v("到"),n("strong",[s._v("Coding")]),s._v("仓库时需要对应"),n("strong",[s._v("Coding")]),s._v("的"),n("code",[s._v("repo")]),s._v("权限")]),s._v(" "),n("li",[s._v("为了安全性我们需要设置环境变量供脚本使用")])]),s._v(" "),n("p",[n("code",[s._v("token")]),s._v("的配置还是蛮简单的，我们把 "),n("code",[s._v("repo")]),s._v("的权限勾选就行，其他无所谓")]),s._v(" "),n("p",[s._v("我们拿到"),n("strong",[s._v("GitHub")]),s._v("生成的"),n("code",[s._v("token")]),s._v("值、与"),n("strong",[s._v("Coding")]),s._v("生成的"),n("code",[s._v("token")]),s._v("值，在我们的"),n("strong",[s._v("GitHub")]),s._v("仓库下")]),s._v(" "),n("p",[s._v("点击 "),n("code",[s._v("setting => Secrets => New repository secret")])]),s._v(" "),n("p",[s._v("新建秘钥，把值对应粘贴进去，确保 "),n("code",[s._v("key")]),s._v("是一致的： "),n("code",[s._v("ACCESS_TOKEN")]),s._v("/"),n("code",[s._v("CODING_TOKEN")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-2.png",alt:"2"}})]),s._v(" "),n("p",[s._v("这样，在我们执行脚本的时候就可以获取到环境变量 "),n("code",[s._v("ACCESS_TOKEN")]),s._v("/"),n("code",[s._v("CODING_TOKEN")]),s._v("了")]),s._v(" "),n("h3",{attrs:{id:"创建-github-action-脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-github-action-脚本"}},[s._v("#")]),s._v(" 创建 GitHub Action 脚本")]),s._v(" "),n("p",[s._v("首先在项目目录下创建文件夹 "),n("code",[s._v(".github/workflows")])]),s._v(" "),n("p",[s._v("然后我们在该目录下创建脚本文件 "),n("code",[s._v("ci.yml")])]),s._v(" "),n("p",[s._v("整体思路如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-1.png",alt:"1"}})]),s._v(" "),n("p",[s._v("简单说明下：")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("ci.yml")]),s._v("的主要作用就是在我们提交代码时，监听到我们的提交行为后，执行我们的"),n("code",[s._v("build")]),s._v("打包脚本，然后把生成的"),n("code",[s._v("dist")]),s._v("目录文件同步到"),n("strong",[s._v("Coding仓库")]),s._v("，这一步主要是让"),n("strong",[s._v("Coding")]),s._v("获取到部署文件。（同时我们也顺便部署了一个"),n("code",[s._v("gh-pages")]),s._v("到"),n("strong",[s._v("GitHub")]),s._v("）")])]),s._v(" "),n("li",[n("p",[s._v("对于博客的部署，这一部分我们交给"),n("strong",[s._v("Coding")]),s._v("处理。")])])]),s._v(" "),n("blockquote",[n("p",[s._v("yml语法也比较简单，有不清楚的同学可以查看阮一峰老师的教程 "),n("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2016/07/yaml.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("YAML 语言教程"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-yml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 流程名称")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听事件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听push事件，在master分支发生push事件时触发。")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作流")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义名称")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deploy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行在虚拟机环境ubuntu-latest")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Checkout "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤 1")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v2 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作用：检出仓库，获取源码")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Use Node@14.x "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤 2")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node@v1 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作用：安装nodejs环境")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 14.x\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Install dependencies "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤 3")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm install "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run deploy.sh "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤  3 （同时部署到github和coding）")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境变量")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("GITHUB_TOKEN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.ACCESS_TOKEN "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# toKen私密变量")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("CODING_TOKEN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.CODING_TOKEN "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# toKen私密变量")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm run deploy "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行我们自己写的shell脚本")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("p",[n("code",[s._v("package.json")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deploy"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash deploy.sh"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("因为逻辑比较多，所以，我单独把部署流程写成独立的脚本抽离出来了，接下来我们切入 "),n("code",[s._v("deploy.sh")])]),s._v(" "),n("h3",{attrs:{id:"编写部署脚本-deploy-sh"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编写部署脚本-deploy-sh"}},[s._v("#")]),s._v(" 编写部署脚本 deploy.sh")]),s._v(" "),n("p",[s._v("该脚本主要执行以下几个步骤：")]),s._v(" "),n("ol",[n("li",[n("code",[s._v("npm run build")]),s._v(" 打包生成 "),n("code",[s._v("dist")])]),s._v(" "),n("li",[s._v("把 "),n("code",[s._v("dist")]),s._v(" 目录 "),n("code",[s._v("push")]),s._v(" 到 "),n("strong",[s._v("GitHub")]),s._v(" "),n("code",[s._v("gh-pages")]),s._v(" 分支")]),s._v(" "),n("li",[s._v("把 "),n("code",[s._v("dist")]),s._v(" 目录 "),n("code",[s._v("push")]),s._v(" 到 "),n("strong",[s._v("Coding")]),s._v(" "),n("code",[s._v("master")]),s._v(" 分支")])]),s._v(" "),n("blockquote",[n("p",[s._v("记得在文件头部指明编译器：#!/usr/bin/env sh")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统当前时间")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nowDate")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y-%m-%d %H:%M:%S"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入生成的文件夹")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docs/.vuepress/dist\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deploy.sh===>update：'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${nowDate}")]),s._v('"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 git用户信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.name "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JS-banana"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.email "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sss213018@163.com"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git commit ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${msg}")]),s._v('"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deploy to github")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("githubUrl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://JS-banana:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${GITHUB_TOKEN}")]),s._v("@github.com/JS-banana/vuepress.git\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$githubUrl")]),s._v(" master:gh-pages "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到github")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deploy to coding")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意！！！这里需要使用coding提供的个人令牌的用户名和token")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("codingUrl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://个人令牌的用户名:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CODING_TOKEN}")]),s._v("@e.coding.net/ssscode/blog/vuepress.git \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$codingUrl")]),s._v(" master "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到coding")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退回开始所在目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 dist")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf docs/.vuepress/dist\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("p",[s._v("ok，至此，"),n("strong",[s._v("GitHub")]),s._v("的工作结束~")]),s._v(" "),n("p",[s._v("我们现在去"),n("strong",[s._v("Coding")]),s._v("接应一波~")]),s._v(" "),n("h3",{attrs:{id:"coding-配置静态博客自动化部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#coding-配置静态博客自动化部署"}},[s._v("#")]),s._v(" Coding 配置静态博客自动化部署")]),s._v(" "),n("p",[n("strong",[s._v("Coding")]),s._v("的配置还是比较友好的，我们只需要点点点，基本完事~")]),s._v(" "),n("p",[s._v("进入我们对应的项目，可以看到仓库已经更新了~")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-3.png",alt:"3"}})]),s._v(" "),n("p",[s._v("接着我们点击左侧菜单进入 "),n("code",[s._v("持续部署 > 网站托管")]),s._v(" 页面，点击 "),n("code",[s._v("新建网站")])]),s._v(" "),n("p",[s._v("这里我们的代码来源选择现有仓库，仓库来源选择对应的仓库即可，勾选为静态网站，选择合适节点，等待系统部署即可")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-4.png",alt:"4"}})]),s._v(" "),n("p",[s._v("在部署成功后我们可以查看应用的基本信息")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-5.png",alt:"5"}})]),s._v(" "),n("p",[s._v("这时我们可以看到，系统会默认生成一个可访问的网站地址，如："),n("a",{attrs:{href:"https://serverless-page-bucket-2zrujpwd-1258454899.cos-website.ap-shanghai.myqcloud.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://serverless-page-bucket-2zrujpwd-1258454899.cos-website.ap-shanghai.myqcloud.com"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("不过，这个地址很不友好，看起来长长的一大串，要是让我记这个地址我直接原地裂开好不好~")]),s._v(" "),n("p",[s._v("好在，我们可以通过配置自定义域名设置自己的网站地址，这里比较简单，根据步骤和"),n("a",{attrs:{href:"%5B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE%5D(https://help.coding.net/docs/pages/operating/customize.html)"}},[s._v("自定义域名配置文档")]),s._v("几分钟基本就搞定了。")]),s._v(" "),n("p",[s._v("然后我们就可以使用自己的域名访问了~起飞："),n("a",{attrs:{href:"https://ssscode.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://ssscode.com"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("最后就是HTPPS的SSL证书了，我们也可以直接免费开启，很方便，这里需要进入到腾讯云进行一些基本配置，按照按照步骤来即可。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/vuepress/coding-6.png",alt:"6"}})]),s._v(" "),n("p",[s._v("OK，大功告成，总的来说还是比较简单的，没什么复杂的逻辑，都是一些基本配置和操作")]),s._v(" "),n("p",[s._v("不过，如果有不明白的地方，也可以花点时间看看文档，应对大多数场景基本没问题~")]),s._v(" "),n("p",[s._v("老实说，白嫖是真滴爽啊😏~")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/JS-banana/images/emoji/4.jpg",alt:"image"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);