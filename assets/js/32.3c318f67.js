(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{538:function(e,v,_){"use strict";_.r(v);var t=_(43),r=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),_("p",[e._v("首先，思考下：")]),e._v(" "),_("p",[e._v("当我们在使用"),_("code",[e._v("vue")]),e._v("编写代码的时候，浏览器是如何识别的呢？进而联想到编辑器是如何识别的呢？更甚者我能可以思考其他各种类型的文件，平台是怎么识别的呢？")]),e._v(" "),_("p",[e._v("这些都是非常有趣的事情，其也必定存在着一种特定的内在运行逻辑，由此展开，发散思维，进一步了解编译原理相关的知识，对于我们探究这些问题都是极有帮助的。")]),e._v(" "),_("p",[e._v("本篇内容就先聚焦简单的一个点开始说起~")]),e._v(" "),_("h2",{attrs:{id:"背景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[e._v("#")]),e._v(" 背景")]),e._v(" "),_("p",[e._v("我先说下项目背景：这是一个基于"),_("code",[e._v("vue2")]),e._v("开发的系统，目前有个报告管理模块，每条详情信息都包含各种列表、图表等，现在需要支持每条报告都支持下载导出为 "),_("code",[e._v("html")]),e._v("格式的一个文件，该"),_("code",[e._v("html")]),e._v("打开后的效果应该是和详情进去是一致的。")]),e._v(" "),_("p",[e._v("OK，问题来了，你打算如何实现？")]),e._v(" "),_("ol",[_("li",[e._v("只依靠前端实现")]),e._v(" "),_("li",[e._v("只依靠后端")]),e._v(" "),_("li",[e._v("前端提供 "),_("code",[e._v("html")]),e._v(" + "),_("code",[e._v("js")]),e._v(" 形式的模板给后端同学，由后端在后台使用"),_("code",[e._v("Chrome")]),e._v("内核渲染完成（后端注入数据）")])]),e._v(" "),_("p",[e._v("1和2留给大家思考，我们公司按照以往经历采用的是方案3，本文先基于方案3进行探究。")]),e._v(" "),_("p",[e._v("抛开其他问题不谈，思考如何快速的把"),_("code",[e._v("vue")]),e._v("文件转换为 "),_("code",[e._v("html")]),e._v("与"),_("code",[e._v("js")]),e._v("，并且可以在浏览器中正常渲染（手写"),_("code",[e._v("html")]),e._v("+"),_("code",[e._v("js")]),e._v("不在讨论范围😀）。")]),e._v(" "),_("h2",{attrs:{id:"技术调研"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#技术调研"}},[e._v("#")]),e._v(" 技术调研")]),e._v(" "),_("ol",[_("li",[_("code",[e._v("Webpack")]),e._v("+"),_("code",[e._v("loader")]),e._v("的方式：毕竟我们项目就是使用W"),_("code",[e._v("ebpack")]),e._v("把"),_("code",[e._v("vue")]),e._v("编译成"),_("code",[e._v("html")]),e._v("、"),_("code",[e._v("js")]),e._v("的，可行性是有的")]),e._v(" "),_("li",[_("code",[e._v("@vue/component-compiler")]),e._v("库：官方库，把"),_("code",[e._v("vue")]),e._v("编译为"),_("code",[e._v("CommonJS")]),e._v("（现在替换为了"),_("a",{attrs:{href:"https://github.com/vuejs/core/tree/main/packages/compiler-sfc",target:"_blank",rel:"noopener noreferrer"}},[e._v("@vue/compiler-sfc"),_("OutboundLink")],1),e._v("），不过，并不影响我们进行编译研究")])]),e._v(" "),_("p",[e._v("基本思路应该就是这样，我们主要需要的数据的也是3个部分："),_("code",[e._v("template")]),e._v("、"),_("code",[e._v("script")]),e._v("、"),_("code",[e._v("style")])]),e._v(" "),_("p",[e._v("在分离出这3部分内容之后，就是后面的组合引用了，以及对于代码中涉及到的异步请求部分要如何处理。")]),e._v(" "),_("h3",{attrs:{id:"ssg是也"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssg是也"}},[e._v("#")]),e._v(" SSG是也~")]),e._v(" "),_("p",[e._v("其实按照后端同学的思路，我提供的模板应该是从上到下按顺序执行的，所有的数据会在最开始由后端注入到我们约定的变量对象上，前端的所有渲染应该以这里的数据为主。")]),e._v(" "),_("ul",[_("li",[e._v("客户端渲染 "),_("strong",[e._v("BSR")]),e._v(" ("),_("code",[e._v("Broswer Side Render")]),e._v(")：只在浏览器上执行，通过Vue 和 React 构建的单页面应用SPA 都是采用这种方式渲染")]),e._v(" "),_("li",[e._v("静态页面生成 "),_("strong",[e._v("SSG")]),e._v(" ("),_("code",[e._v("Static Site Generation")]),e._v(")：动态内容静态化，构建时渲染为html，针对博客这种，每位用户访问的相同页面内容都是一致的，Vuepress、Nextjs等")]),e._v(" "),_("li",[e._v("服务端渲染 "),_("strong",[e._v("SSR")]),e._v(" ("),_("code",[e._v("Server Side Render")]),e._v(")：请求之后，获取数据执行渲染，后端返回给前端的是注入数据之后的 html 字符串，返回给前端在浏览器完成渲染，可根据不同用户返回不同内容")])]),e._v(" "),_("p",[e._v("我再一想，这不是和SSR、SSG很像吗，顺着这个思路有没有合适的方案呢")]),e._v(" "),_("h2",{attrs:{id:"vue-loader-是什么"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vue-loader-是什么"}},[e._v("#")]),e._v(" vue-loader 是什么")]),e._v(" "),_("h2",{attrs:{id:"vue-component-compiler-工作原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vue-component-compiler-工作原理"}},[e._v("#")]),e._v(" @vue/component-compiler 工作原理")]),e._v(" "),_("h2",{attrs:{id:"资料"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[e._v("#")]),e._v(" 资料")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://github.com/vuejs/vue-component-compiler",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue-component-compiler"),_("OutboundLink")],1)]),e._v(" "),_("li",[_("a",{attrs:{href:"https://daief.tech/post/compile-vue-file-to-js-file/",target:"_blank",rel:"noopener noreferrer"}},[e._v("编译 Vue 单文件组件至 JS 文件"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=r.exports}}]);